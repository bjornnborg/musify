var url = require('url');
var querystring = require('querystring');
var resourceManager = require("../services/resourceManager");
var jsonHandler = require("../services/jsonHandler");
var urlMapping = require("../urlMapping");
var dateFormatter = require('../services/dateFormatter');

/**
* @author kzaporojets 31/07/2012- mockeo de search de items
**/
var itemSearchController = {
	ping : function(request, response) {
		response.writeHead(200, {
			'Content-Type' : 'text/plain; charset=utf-8'
		});
		response.write("pong");
		response.end();        
	},
	getItem : function(request, response) {

		var pathname = url.parse(request.url).pathname;
   		var uriRegExp = new RegExp('^/items/(\\w+)');
    	uriRegExp.exec(pathname);
    	var itemId = RegExp.$1;
    	
    	
        if (itemId == 'MLB542181451') {
            response.writeHead(200, {
                                'Content-Type' : 'application/json; charset=utf-8'
                        });
            response.write(JSON.stringify({"id":"MLB542181451","category_id":"MLB654321","seller_id":123456, "title":"Mi item 2"}));
            response.end();
        }
        else if (itemId == 'MLA123456') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLA123456","category_id":"MLA654321","seller_id":123456, "title":"Mi item 1"}));
			response.end();        
		} else if (itemId == 'MLB123456') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB123456","category_id":"MLB654321","seller_id":123456, "title":"Mi item 2"}));
			response.end();
		}  else if (itemId == 'MLA213717362') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLA213717362","category_id":"MLA654321","seller_id":123456, "condition":"new", "title":"Mi item 3"}));
			response.end();
		} else if (itemId == 'MLB495303938') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB495303938","site_id":"MLB","title":"Óculos Absurda Calixto Frete Gratís !!!","subtitle":null,"seller_id":141469430,"category_id":"MLB5115","price":59.9,"base_price":59.9,"currency_id":"BRL","initial_quantity":30,"available_quantity":29,"sold_quantity":1,"buying_mode":"buy_it_now","listing_type_id":"bronze","start_time":"2013-07-05T01:32:02.000Z","stop_time":"2013-09-03T01:32:02.000Z","end_time":"2013-09-03T01:32:02.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-495303938-oculos-absurda-calixto-frete-gratis--_JM","thumbnail":"http://img1.mlstatic.com/s_MLB_v_I_f_4602890070_072013.jpg","secure_thumbnail":"https://www.mercadolibre.com/jm/img?s=MLB&v=I&f=4602890070_072013.jpg","pictures":[{"id":"MLB4602890070_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4602890070_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602890070_072013.jpg","size":"500x374","max_size":"625x468","quality":""},{"id":"MLB4602891726_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602891726_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602891726_072013.jpg","size":"259x194","max_size":"259x194","quality":""},{"id":"MLB4602892226_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602892226_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602892226_072013.jpg","size":"325x155","max_size":"325x155","quality":""},{"id":"MLB4602882379_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602882379_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602882379_072013.jpg","size":"275x183","max_size":"275x183","quality":""},{"id":"MLB4602890338_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602890338_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602890338_072013.jpg","size":"500x374","max_size":"625x468","quality":""},{"id":"MLB4602880479_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4602880479_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602880479_072013.jpg","size":"500x484","max_size":"500x484","quality":""}],"video_id":null,"descriptions":[{"id":"MLB495303938-422875840"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[],"shipping":{"profile_id":null,"mode":"not_specified","local_pick_up":false,"free_shipping":false,"methods":[],"dimensions":null},"seller_address":{"id":104960368,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":""},"seller_contact":null,"location":null,"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"inactive","sub_status":["expired"],"tags":[],"warranty":null,"catalog_product_id":null,"seller_custom_field":null,"parent_item_id":null,"automatic_relist":false,"date_created":"2013-07-05T01:32:02.000Z","last_updated":"2013-07-23T21:36:24.000Z"}));
			response.end();
		} else if (itemId == 'MLB499041250') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB496273984","site_id":"MLB","title":"Nike Shox 12 Molas Tlx 2013 - Série Limitada - Frete Grátis","subtitle":null,"seller_id":141469430,"category_id":"MLB99848","official_store_id":null,"price":249.99,"base_price":249.99,"currency_id":"BRL","initial_quantity":120,"available_quantity":105,"sold_quantity":15,"buying_mode":"buy_it_now","listing_type_id":"bronze","start_time":"2013-07-09T23:05:51.000Z","stop_time":"2013-09-07T23:05:51.000Z","end_time":"2013-09-07T23:05:51.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-496273984-nike-shox-12-molas-tlx-2013-serie-limitada-frete-gratis-_JM","thumbnail":"http://img2.mlstatic.com/s_MLB_v_I_f_4624581023_072013.jpg","secure_thumbnail":"https://www.mercadolibre.com/jm/img?s=MLB&v=I&f=4624581023_072013.jpg","pictures":[{"id":"MLB4624581023_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4624581023_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624581023_072013.jpg","size":"500x375","max_size":"1200x900","quality":""},{"id":"MLB4624582930_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4624582930_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624582930_072013.jpg","size":"500x375","max_size":"1200x900","quality":""},{"id":"MLB4624607487_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4624607487_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624607487_072013.jpg","size":"500x375","max_size":"1200x900","quality":""},{"id":"MLB4624845147_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4624845147_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624845147_072013.jpg","size":"500x281","max_size":"960x541","quality":""},{"id":"MLB4624845747_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4624845747_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624845747_072013.jpg","size":"500x281","max_size":"960x541","quality":""},{"id":"MLB4624854368_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4624854368_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624854368_072013.jpg","size":"500x375","max_size":"500x375","quality":""}],"video_id":null,"descriptions":[{"id":"MLB496273984-425242501"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[{"id":"MLBWC","description":"Acordar con el comprador","type":"G"},{"id":"MLBCC","description":"Cartão de Crédito","type":"N"},{"id":"MLBMO","description":"Dinheiro","type":"G"},{"id":"MLBDE","description":"Depósito Bancário","type":"D"}],"shipping":{"profile_id":null,"mode":"not_specified","local_pick_up":true,"free_shipping":true,"methods":[],"dimensions":null},"seller_address":{"id":104960368,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":""},"seller_contact":null,"location":null,"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[{"id":"1001","name":"Género","value_id":"10001","value_name":"Masculinos","attribute_group_id":"DFLT","attribute_group_name":"Outros"},{"id":"1020","name":"Marca","value_id":"10321","value_name":"Nike","attribute_group_id":"DFLT","attribute_group_name":"Outros"}],"listing_source":"","variations":[{"id":4624703500,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22047","value_name":"43"}],"price":249.99,"available_quantity":19,"sold_quantity":1,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703507,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22045","value_name":"42"}],"price":249.99,"available_quantity":19,"sold_quantity":1,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703514,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22037","value_name":"38"}],"price":249.99,"available_quantity":18,"sold_quantity":2,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703519,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22039","value_name":"39"}],"price":249.99,"available_quantity":20,"sold_quantity":0,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703526,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22043","value_name":"41"}],"price":249.99,"available_quantity":17,"sold_quantity":3,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703534,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22041","value_name":"40"}],"price":249.99,"available_quantity":12,"sold_quantity":8,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null}],"status":"inactive","sub_status":["expired"],"tags":[],"warranty":"GARANTIA CONTRA DEFEITOS DE FABRICAÇÃO !!!","catalog_product_id":null,"seller_custom_field":null,"parent_item_id":null,"automatic_relist":false,"date_created":"2013-07-09T23:05:51.000Z","last_updated":"2013-08-19T16:33:22.000Z"}));
			response.end();
		} else if (itemId == 'MLB499041350') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB495303938","site_id":"MLB","title":"Óculos Absurda Calixto Frete Gratís !!!","subtitle":null,"seller_id":141469430,"category_id":"MLB5115","price":59.9,"base_price":59.9,"currency_id":"BRL","initial_quantity":30,"available_quantity":29,"sold_quantity":1,"buying_mode":"buy_it_now","listing_type_id":"bronze","start_time":"2013-07-05T01:32:02.000Z","stop_time":"2013-09-03T01:32:02.000Z","end_time":"2013-09-03T01:32:02.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-495303938-oculos-absurda-calixto-frete-gratis--_JM","thumbnail":"http://img1.mlstatic.com/s_MLB_v_I_f_4602890070_072013.jpg","secure_thumbnail":"https://www.mercadolibre.com/jm/img?s=MLB&v=I&f=4602890070_072013.jpg","pictures":[{"id":"MLB4602890070_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4602890070_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602890070_072013.jpg","size":"500x374","max_size":"625x468","quality":""},{"id":"MLB4602891726_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602891726_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602891726_072013.jpg","size":"259x194","max_size":"259x194","quality":""},{"id":"MLB4602892226_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602892226_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602892226_072013.jpg","size":"325x155","max_size":"325x155","quality":""},{"id":"MLB4602882379_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602882379_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602882379_072013.jpg","size":"275x183","max_size":"275x183","quality":""},{"id":"MLB4602890338_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602890338_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602890338_072013.jpg","size":"500x374","max_size":"625x468","quality":""},{"id":"MLB4602880479_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4602880479_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602880479_072013.jpg","size":"500x484","max_size":"500x484","quality":""}],"video_id":null,"descriptions":[{"id":"MLB495303938-422875840"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[],"shipping":{"profile_id":null,"mode":"not_specified","local_pick_up":false,"free_shipping":false,"methods":[],"dimensions":null},"seller_address":{"id":104960368,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":""},"seller_contact":null,"location":null,"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"inactive","sub_status":["expired"],"tags":[],"warranty":null,"catalog_product_id":null,"seller_custom_field":null,"parent_item_id":null,"automatic_relist":false,"date_created":"2013-07-05T01:32:02.000Z","last_updated":"2013-07-23T21:36:24.000Z"}));
			response.end();
		} else if (itemId == 'MLB495312956') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB495303938","site_id":"MLB","title":"Óculos Absurda Calixto Frete Gratís !!!","subtitle":null,"seller_id":141469430,"category_id":"MLB5115","price":59.9,"base_price":59.9,"currency_id":"BRL","initial_quantity":30,"available_quantity":29,"sold_quantity":1,"buying_mode":"buy_it_now","listing_type_id":"bronze","start_time":"2013-07-05T01:32:02.000Z","stop_time":"2013-09-03T01:32:02.000Z","end_time":"2013-09-03T01:32:02.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-495303938-oculos-absurda-calixto-frete-gratis--_JM","thumbnail":"http://img1.mlstatic.com/s_MLB_v_I_f_4602890070_072013.jpg","secure_thumbnail":"https://www.mercadolibre.com/jm/img?s=MLB&v=I&f=4602890070_072013.jpg","pictures":[{"id":"MLB4602890070_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4602890070_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602890070_072013.jpg","size":"500x374","max_size":"625x468","quality":""},{"id":"MLB4602891726_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602891726_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602891726_072013.jpg","size":"259x194","max_size":"259x194","quality":""},{"id":"MLB4602892226_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602892226_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602892226_072013.jpg","size":"325x155","max_size":"325x155","quality":""},{"id":"MLB4602882379_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602882379_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602882379_072013.jpg","size":"275x183","max_size":"275x183","quality":""},{"id":"MLB4602890338_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602890338_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602890338_072013.jpg","size":"500x374","max_size":"625x468","quality":""},{"id":"MLB4602880479_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4602880479_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602880479_072013.jpg","size":"500x484","max_size":"500x484","quality":""}],"video_id":null,"descriptions":[{"id":"MLB495303938-422875840"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[],"shipping":{"profile_id":null,"mode":"not_specified","local_pick_up":false,"free_shipping":false,"methods":[],"dimensions":null},"seller_address":{"id":104960368,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":""},"seller_contact":null,"location":null,"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"inactive","sub_status":["expired"],"tags":[],"warranty":null,"catalog_product_id":null,"seller_custom_field":null,"parent_item_id":null,"automatic_relist":false,"date_created":"2013-07-05T01:32:02.000Z","last_updated":"2013-07-23T21:36:24.000Z"}));
			response.end();
		} else if (itemId == 'MLB495303938') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB495303938","site_id":"MLB","title":"Óculos Absurda Calixto Frete Gratís !!!","subtitle":null,"seller_id":141469430,"category_id":"MLB5115","official_store_id":null,"price":59.9,"base_price":59.9,"currency_id":"BRL","initial_quantity":30,"available_quantity":29,"sold_quantity":1,"buying_mode":"buy_it_now","listing_type_id":"bronze","start_time":"2013-07-05T01:32:02.000Z","stop_time":"2013-09-03T01:32:02.000Z","end_time":"2013-09-03T01:32:02.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-495303938-oculos-absurda-calixto-frete-gratis--_JM","thumbnail":"http://img1.mlstatic.com/s_MLB_v_I_f_4602890070_072013.jpg","secure_thumbnail":"https://www.mercadolibre.com/jm/img?s=MLB&v=I&f=4602890070_072013.jpg","pictures":[{"id":"MLB4602890070_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4602890070_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602890070_072013.jpg","size":"500x374","max_size":"625x468","quality":""},{"id":"MLB4602891726_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602891726_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602891726_072013.jpg","size":"259x194","max_size":"259x194","quality":""},{"id":"MLB4602892226_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602892226_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602892226_072013.jpg","size":"325x155","max_size":"325x155","quality":""},{"id":"MLB4602882379_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602882379_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602882379_072013.jpg","size":"275x183","max_size":"275x183","quality":""},{"id":"MLB4602890338_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4602890338_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602890338_072013.jpg","size":"500x374","max_size":"625x468","quality":""},{"id":"MLB4602880479_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4602880479_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4602880479_072013.jpg","size":"500x484","max_size":"500x484","quality":""}],"video_id":null,"descriptions":[{"id":"MLB495303938-422875840"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[],"shipping":{"profile_id":null,"mode":"not_specified","local_pick_up":false,"free_shipping":false,"methods":[],"dimensions":null},"seller_address":{"id":104960368,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":""},"seller_contact":null,"location":null,"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"inactive","sub_status":["expired"],"tags":[],"warranty":null,"catalog_product_id":null,"seller_custom_field":null,"parent_item_id":null,"automatic_relist":false,"date_created":"2013-07-05T01:32:02.000Z","last_updated":"2013-07-23T21:36:24.000Z"}));
			response.end();
		} else if (itemId == 'MLB496273984') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB496273984","site_id":"MLB","title":"Nike Shox 12 Molas Tlx 2013 - Série Limitada - Frete Grátis","subtitle":null,"seller_id":141469430,"category_id":"MLB99848","official_store_id":null,"price":249.99,"base_price":249.99,"currency_id":"BRL","initial_quantity":120,"available_quantity":105,"sold_quantity":15,"buying_mode":"buy_it_now","listing_type_id":"bronze","start_time":"2013-07-09T23:05:51.000Z","stop_time":"2013-09-07T23:05:51.000Z","end_time":"2013-09-07T23:05:51.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-496273984-nike-shox-12-molas-tlx-2013-serie-limitada-frete-gratis-_JM","thumbnail":"http://img2.mlstatic.com/s_MLB_v_I_f_4624581023_072013.jpg","secure_thumbnail":"https://www.mercadolibre.com/jm/img?s=MLB&v=I&f=4624581023_072013.jpg","pictures":[{"id":"MLB4624581023_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4624581023_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624581023_072013.jpg","size":"500x375","max_size":"1200x900","quality":""},{"id":"MLB4624582930_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4624582930_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624582930_072013.jpg","size":"500x375","max_size":"1200x900","quality":""},{"id":"MLB4624607487_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4624607487_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624607487_072013.jpg","size":"500x375","max_size":"1200x900","quality":""},{"id":"MLB4624845147_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4624845147_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624845147_072013.jpg","size":"500x281","max_size":"960x541","quality":""},{"id":"MLB4624845747_072013","url":"http://img2.mlstatic.com/s_MLB_v_O_f_4624845747_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624845747_072013.jpg","size":"500x281","max_size":"960x541","quality":""},{"id":"MLB4624854368_072013","url":"http://img1.mlstatic.com/s_MLB_v_O_f_4624854368_072013.jpg","secure_url":"https://www.mercadolibre.com/jm/img?s=MLB&v=O&f=4624854368_072013.jpg","size":"500x375","max_size":"500x375","quality":""}],"video_id":null,"descriptions":[{"id":"MLB496273984-425242501"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[{"id":"MLBWC","description":"Acordar con el comprador","type":"G"},{"id":"MLBCC","description":"Cartão de Crédito","type":"N"},{"id":"MLBMO","description":"Dinheiro","type":"G"},{"id":"MLBDE","description":"Depósito Bancário","type":"D"}],"shipping":{"profile_id":null,"mode":"not_specified","local_pick_up":true,"free_shipping":true,"methods":[],"dimensions":null},"seller_address":{"id":104960368,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":""},"seller_contact":null,"location":null,"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[{"id":"1001","name":"Género","value_id":"10001","value_name":"Masculinos","attribute_group_id":"DFLT","attribute_group_name":"Outros"},{"id":"1020","name":"Marca","value_id":"10321","value_name":"Nike","attribute_group_id":"DFLT","attribute_group_name":"Outros"}],"listing_source":"","variations":[{"id":4624703500,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22047","value_name":"43"}],"price":249.99,"available_quantity":19,"sold_quantity":1,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703507,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22045","value_name":"42"}],"price":249.99,"available_quantity":19,"sold_quantity":1,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703514,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22037","value_name":"38"}],"price":249.99,"available_quantity":18,"sold_quantity":2,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703519,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22039","value_name":"39"}],"price":249.99,"available_quantity":20,"sold_quantity":0,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703526,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22043","value_name":"41"}],"price":249.99,"available_quantity":17,"sold_quantity":3,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null},{"id":4624703534,"attribute_combinations":[{"id":"43000","name":"Cor Secundária","value_id":"52057","value_name":"Vermelho"},{"id":"33000","name":"Cor principal","value_id":"52051","value_name":"Cinza"},{"id":"23000","name":"Tamanho","value_id":"22041","value_name":"40"}],"price":249.99,"available_quantity":12,"sold_quantity":8,"picture_ids":["MLB4624581023_072013","MLB4624582930_072013","MLB4624607487_072013","MLB4624845147_072013","MLB4624845747_072013","MLB4624854368_072013"],"seller_custom_field":null}],"status":"inactive","sub_status":["expired"],"tags":[],"warranty":"GARANTIA CONTRA DEFEITOS DE FABRICAÇÃO !!!","catalog_product_id":null,"seller_custom_field":null,"parent_item_id":null,"automatic_relist":false,"date_created":"2013-07-09T23:05:51.000Z","last_updated":"2013-08-19T16:33:22.000Z"}));
			response.end();
		} else if (itemId == 'MLV422281088') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLV422281088","site_id":"MLV","title":"Crocs Hover Slip On Canvas Remate Talla 35 Y 36 Somos Tienda","subtitle":null,"seller_id":57289048,"category_id":"MLV62587","official_store_id":null,"price":599.99,"base_price":599.99,"original_price":null,"currency_id":"VEF","initial_quantity":316,"available_quantity":306,"sold_quantity":162,"buying_mode":"buy_it_now","listing_type_id":"gold","start_time":"2014-05-19T13:40:18.000Z","stop_time":"2014-07-18T13:40:18.000Z","condition":"new","permalink":"http://articulo.mercadolibre.com.ve/MLV-422281088-crocs-hover-slip-on-canvas-remate-talla-35-y-36-somos-tienda-_JM","thumbnail":"http://mlv-s1-p.mlstatic.com/1924-MLV3517340899_122012-I.jpg","secure_thumbnail":"https://a248.e.akamai.net/mlv-s1-p.mlstatic.com/1924-MLV3517340899_122012-I.jpg","pictures":[{"id":"1924-MLV3517340899_122012","url":"http://mlv-s1-p.mlstatic.com/1924-MLV3517340899_122012-O.jpg","secure_url":"https://a248.e.akamai.net/mlv-s1-p.mlstatic.com/1924-MLV3517340899_122012-O.jpg","size":"500x375","max_size":"960x720","quality":""},{"id":"1902-MLV3517323227_122012","url":"http://mlv-s1-p.mlstatic.com/1902-MLV3517323227_122012-O.jpg","secure_url":"https://a248.e.akamai.net/mlv-s1-p.mlstatic.com/1902-MLV3517323227_122012-O.jpg","size":"500x375","max_size":"960x720","quality":""},{"id":"1980-MLV3517341894_122012","url":"http://mlv-s1-p.mlstatic.com/1980-MLV3517341894_122012-O.jpg","secure_url":"https://a248.e.akamai.net/mlv-s1-p.mlstatic.com/1980-MLV3517341894_122012-O.jpg","size":"500x375","max_size":"960x720","quality":""},{"id":"1947-MLV3517342861_122012","url":"http://mlv-s2-p.mlstatic.com/1947-MLV3517342861_122012-O.jpg","secure_url":"https://a248.e.akamai.net/mlv-s2-p.mlstatic.com/1947-MLV3517342861_122012-O.jpg","size":"500x311","max_size":"503x313","quality":""},{"id":"1960-MLV3517325427_122012","url":"http://mlv-s1-p.mlstatic.com/1960-MLV3517325427_122012-O.jpg","secure_url":"https://a248.e.akamai.net/mlv-s1-p.mlstatic.com/1960-MLV3517325427_122012-O.jpg","size":"500x375","max_size":"604x453","quality":""},{"id":"1927-MLV3517325866_122012","url":"http://mlv-s2-p.mlstatic.com/1927-MLV3517325866_122012-O.jpg","secure_url":"https://a248.e.akamai.net/mlv-s2-p.mlstatic.com/1927-MLV3517325866_122012-O.jpg","size":"500x375","max_size":"960x720","quality":""}],"video_id":null,"descriptions":[{"id":"MLV422281088-587478744"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[{"id":"MLVWC","description":"Acordar con el comprador","type":"G"},{"id":"MLVPO","description":"Depósito bancario","type":"G"}],"shipping":{"mode":"custom","local_pick_up":false,"free_shipping":false,"methods":[],"dimensions":null},"seller_address":{"id":76836056,"comment":"","address_line":"","zip_code":"","city":{"id":"","name":"Lun. a Vie 9am-12pm y 2pm-6pm"},"state":{"id":"VE-G","name":"Carabobo"},"country":{"id":"VE","name":"Venezuela"},"latitude":"","longitude":"","search_location":{"neighborhood":{"id":"","name":""},"city":{"id":"","name":""},"state":{"id":"","name":""}}},"seller_contact":null,"location":{},"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"active","sub_status":[],"tags":["good_quality_thumbnail","dragged_bids_and_visits"],"warranty":null,"catalog_product_id":null,"parent_item_id":"MLV419701398","differential_pricing":null,"automatic_relist":false,"date_created":"2014-05-19T13:40:18.000Z","last_updated":"2014-05-21T16:31:32.000Z"}));
			response.end();
		} else if (itemId == 'MLB556530958') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB556530958","site_id":"MLB","title":"Parabarro Peugeot 207 Parte Da Frente Dianteiro","subtitle":null,"seller_id":72158847,"category_id":"MLB5802","official_store_id":null,"price":49.89,"base_price":49.89,"original_price":null,"currency_id":"BRL","initial_quantity":9,"available_quantity":4,"sold_quantity":9,"buying_mode":"buy_it_now","listing_type_id":"silver","start_time":"2014-04-28T18:36:37.000Z","stop_time":"2014-06-27T18:36:37.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-556530958-parabarro-peugeot-207-parte-da-frente-dianteiro-_JM","thumbnail":"http://mlb-s2-p.mlstatic.com/14356-MLB20086037995_042014-I.jpg","secure_thumbnail":"https://a248.e.akamai.net/mlb-s2-p.mlstatic.com/14356-MLB20086037995_042014-I.jpg","pictures":[{"id":"14356-MLB20086037995_042014","url":"http://mlb-s2-p.mlstatic.com/14356-MLB20086037995_042014-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s2-p.mlstatic.com/14356-MLB20086037995_042014-O.jpg","size":"500x500","max_size":"500x500","quality":""},{"id":"6329-MLB5051748426_092013","url":"http://mlb-s1-p.mlstatic.com/6329-MLB5051748426_092013-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/6329-MLB5051748426_092013-O.jpg","size":"500x500","max_size":"700x700","quality":""},{"id":"6385-MLB5051729850_092013","url":"http://mlb-s1-p.mlstatic.com/6385-MLB5051729850_092013-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/6385-MLB5051729850_092013-O.jpg","size":"500x500","max_size":"700x700","quality":""}],"video_id":null,"descriptions":[{"id":"MLB556530958-576144599"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[{"id":"MLBMO","description":"Dinheiro","type":"G"},{"id":"MLBCC","description":"Cartão de Crédito","type":"N"},{"id":"MLBDE","description":"Depósito Bancário","type":"D"}],"shipping":{"mode":"not_specified","local_pick_up":true,"free_shipping":false,"methods":[],"dimensions":"30x30x30,3000"},"seller_address":{"id":100310211,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":"","search_location":{"neighborhood":{"id":"","name":""},"city":{"id":"","name":""},"state":{"id":"TUxCUFNBT085N2E4","name":"São Paulo"}}},"seller_contact":null,"location":{},"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"active","sub_status":[],"tags":["dragged_bids_and_visits"],"warranty":"3 meses de garantia contra defeito de fabricação.","catalog_product_id":null,"parent_item_id":"MLB543477184","differential_pricing":null,"automatic_relist":false,"date_created":"2014-04-28T18:36:37.000Z","last_updated":"2014-05-20T19:19:36.057Z"}));
			response.end();
		} else if (itemId == 'MLB561179743') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB561179743","site_id":"MLB","title":"Babyliss Miracurl Nano Titanium Modelador De Cachos 45%off","status":"under_review","seller_id":91595995,"date_created":"2014-05-19T21:54:44.000Z","listing_type_id":"silver","start_time":"2014-05-19T21:54:44.000Z","category_id":"MLB44076"}));
			response.end();
		} else if (itemId == 'MLB549336039') {
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB549336039","site_id":"MLB","title":"Bateria Bn1 + Carregador Camera Digital Sony W380 W350 W320","subtitle":"W320 W330 W340 W350 W360 W370 W380 W390 W310 Tx5 Tx7 Tx9 Wx5 Np-bn1","seller_id":30046053,"category_id":"MLB38268","official_store_id":null,"price":29.98,"base_price":29.98,"original_price":null,"currency_id":"BRL","initial_quantity":63,"available_quantity":16,"sold_quantity":54,"buying_mode":"buy_it_now","listing_type_id":"gold","start_time":"2014-03-24T13:21:30.000Z","stop_time":"2014-05-23T13:21:30.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-549336039-bateria-bn1-carregador-camera-digital-sony-w380-w350-w320-_JM","thumbnail":"http://mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-I.jpg","secure_thumbnail":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-I.jpg","pictures":[{"id":"14055-MLB173712716_8055","url":"http://mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-O.jpg","size":"400x270","max_size":"400x270","quality":""},{"id":"13741-MLB173712716_61","url":"http://mlb-s2-p.mlstatic.com/13741-MLB173712716_61-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s2-p.mlstatic.com/13741-MLB173712716_61-O.jpg","size":"450x382","max_size":"450x382","quality":""}],"video_id":null,"descriptions":[{"id":"MLB549336039-558257150"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[{"id":"MLBWC","description":"Acordar con el comprador","type":"G"},{"id":"MLBCC","description":"Cartão de Crédito","type":"N"},{"id":"MLBMO","description":"Dinheiro","type":"G"},{"id":"MLBDE","description":"Depósito Bancário","type":"D"}],"shipping":{"mode":"not_specified","local_pick_up":false,"free_shipping":false,"methods":[],"dimensions":null},"seller_address":{"id":87740142,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":"","search_location":{"neighborhood":{"id":"","name":""},"city":{"id":"","name":""},"state":{"id":"TUxCUFNBT085N2E4","name":"São Paulo"}}},"seller_contact":null,"location":{},"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"active","sub_status":[],"tags":["dragged_bids_and_visits"],"warranty":"3 meses de garantia","catalog_product_id":null,"parent_item_id":"MLB536038496","differential_pricing":null,"automatic_relist":false,"date_created":"2014-03-24T13:21:30.000Z","last_updated":"2014-05-20T19:19:39.000Z"}));
			response.end();
		} else if (itemId == 'MLB111111111') {
			sleep(1000);
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.write(JSON.stringify({"id":"MLB549336039","site_id":"MLB","title":"Bateria Bn1 + Carregador Camera Digital Sony W380 W350 W320","subtitle":"W320 W330 W340 W350 W360 W370 W380 W390 W310 Tx5 Tx7 Tx9 Wx5 Np-bn1","seller_id":30046053,"category_id":"MLB38268","official_store_id":null,"price":29.98,"base_price":29.98,"original_price":null,"currency_id":"BRL","initial_quantity":63,"available_quantity":16,"sold_quantity":54,"buying_mode":"buy_it_now","listing_type_id":"gold","start_time":"2014-03-24T13:21:30.000Z","stop_time":"2014-05-23T13:21:30.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-549336039-bateria-bn1-carregador-camera-digital-sony-w380-w350-w320-_JM","thumbnail":"http://mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-I.jpg","secure_thumbnail":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-I.jpg","pictures":[{"id":"14055-MLB173712716_8055","url":"http://mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-O.jpg","size":"400x270","max_size":"400x270","quality":""},{"id":"13741-MLB173712716_61","url":"http://mlb-s2-p.mlstatic.com/13741-MLB173712716_61-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s2-p.mlstatic.com/13741-MLB173712716_61-O.jpg","size":"450x382","max_size":"450x382","quality":""}],"video_id":null,"descriptions":[{"id":"MLB549336039-558257150"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[{"id":"MLBWC","description":"Acordar con el comprador","type":"G"},{"id":"MLBCC","description":"Cartão de Crédito","type":"N"},{"id":"MLBMO","description":"Dinheiro","type":"G"},{"id":"MLBDE","description":"Depósito Bancário","type":"D"}],"shipping":{"mode":"not_specified","local_pick_up":false,"free_shipping":false,"methods":[],"dimensions":null},"seller_address":{"id":87740142,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":"","search_location":{"neighborhood":{"id":"","name":""},"city":{"id":"","name":""},"state":{"id":"TUxCUFNBT085N2E4","name":"São Paulo"}}},"seller_contact":null,"location":{},"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"active","sub_status":[],"tags":["dragged_bids_and_visits"],"warranty":"3 meses de garantia","catalog_product_id":null,"parent_item_id":"MLB536038496","differential_pricing":null,"automatic_relist":false,"date_created":"2014-03-24T13:21:30.000Z","last_updated":"2014-05-20T19:19:39.000Z"}));
			response.end();
		} else if (itemId =='MLM453492795' || itemId =='MLM453492773' || itemId =='MLA485216964' || itemId =='MLA485216635') {

			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			
			var now = dateFormatter.DateFormatter.format(new Date(), 'Y-m-d');
            var nowTime = dateFormatter.DateFormatter.format(new Date(), 'H:i:s');
            var completeTime = now + 'T' + nowTime + '.000-04:00'
			response.write(JSON.stringify({"id":itemId,"site_id":"MLB","title":"Bateria Bn1 + Carregador Camera Digital Sony W380 W350 W320","subtitle":"W320 W330 W340 W350 W360 W370 W380 W390 W310 Tx5 Tx7 Tx9 Wx5 Np-bn1","seller_id":30046053,"category_id":"MLB38269","official_store_id":null,"price":29.98,"base_price":29.98,"original_price":null,"currency_id":"BRL","initial_quantity":3,"available_quantity":16,"sold_quantity":54,"buying_mode":"buy_it_now","listing_type_id":"gold","start_time":completeTime,"stop_time":"2014-05-23T13:21:30.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-549336039-bateria-bn1-carregador-camera-digital-sony-w380-w350-w320-_JM","thumbnail":"http://mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-I.jpg","secure_thumbnail":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-I.jpg","pictures":[{"id":"14055-MLB173712716_8055","url":"http://mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-O.jpg","size":"400x270","max_size":"400x270","quality":""},{"id":"13741-MLB173712716_61","url":"http://mlb-s2-p.mlstatic.com/13741-MLB173712716_61-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s2-p.mlstatic.com/13741-MLB173712716_61-O.jpg","size":"450x382","max_size":"450x382","quality":""}],"video_id":null,"descriptions":[{"id":"MLB549336039-558257150"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[{"id":"MLBWC","description":"Acordar con el comprador","type":"G"},{"id":"MLBCC","description":"Cartão de Crédito","type":"N"},{"id":"MLBMO","description":"Dinheiro","type":"G"},{"id":"MLBDE","description":"Depósito Bancário","type":"D"}],"shipping":{"mode":"not_specified","local_pick_up":false,"free_shipping":false,"methods":[],"dimensions":null},"seller_address":{"id":87740142,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":"","search_location":{"neighborhood":{"id":"","name":""},"city":{"id":"","name":""},"state":{"id":"TUxCUFNBT085N2E4","name":"São Paulo"}}},"seller_contact":null,"location":{},"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"active","sub_status":[],"tags":["dragged_bids_and_visits"],"warranty":"3 meses de garantia","catalog_product_id":null,"parent_item_id":"MLB536038496","differential_pricing":null,"automatic_relist":false,"date_created":"2014-03-24T13:21:30.000Z","last_updated":"2014-05-20T19:19:39.000Z"}));
			response.end();

		} else if (itemId =='MLM453089719' ){
			response.writeHead(200, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			
			var someDate = new Date();
			var numberOfDaysToAdd = 2;
			someDate.setDate(someDate.getDate() + -1*numberOfDaysToAdd); 
			someDate.setHours(someDate.getHours() + 12); 
			
			var now = dateFormatter.DateFormatter.format(someDate, 'Y-m-d');
            var nowTime = dateFormatter.DateFormatter.format(someDate, 'H:i:s');
            var completeTime = now + 'T' + nowTime + '.000-04:00'
			response.write(JSON.stringify({"id":itemId,"site_id":"MLA","title":"Bateria Bn1 + Carregador Camera Digital Sony W380 W350 W320","subtitle":"W320 W330 W340 W350 W360 W370 W380 W390 W310 Tx5 Tx7 Tx9 Wx5 Np-bn1","seller_id":30046053,"category_id":"MLA27364","official_store_id":null,"price":29.98,"base_price":29.98,"original_price":null,"currency_id":"BRL","initial_quantity":3,"available_quantity":16,"sold_quantity":54,"buying_mode":"buy_it_now","listing_type_id":"gold","start_time":completeTime,"stop_time":"2014-05-23T13:21:30.000Z","condition":"new","permalink":"http://produto.mercadolivre.com.br/MLB-549336039-bateria-bn1-carregador-camera-digital-sony-w380-w350-w320-_JM","thumbnail":"http://mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-I.jpg","secure_thumbnail":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-I.jpg","pictures":[{"id":"14055-MLB173712716_8055","url":"http://mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s1-p.mlstatic.com/14055-MLB173712716_8055-O.jpg","size":"400x270","max_size":"400x270","quality":""},{"id":"13741-MLB173712716_61","url":"http://mlb-s2-p.mlstatic.com/13741-MLB173712716_61-O.jpg","secure_url":"https://a248.e.akamai.net/mlb-s2-p.mlstatic.com/13741-MLB173712716_61-O.jpg","size":"450x382","max_size":"450x382","quality":""}],"video_id":null,"descriptions":[{"id":"MLB549336039-558257150"}],"accepts_mercadopago":true,"non_mercado_pago_payment_methods":[{"id":"MLBWC","description":"Acordar con el comprador","type":"G"},{"id":"MLBCC","description":"Cartão de Crédito","type":"N"},{"id":"MLBMO","description":"Dinheiro","type":"G"},{"id":"MLBDE","description":"Depósito Bancário","type":"D"}],"shipping":{"mode":"not_specified","local_pick_up":false,"free_shipping":false,"methods":[],"dimensions":null},"seller_address":{"id":87740142,"comment":"","address_line":"","zip_code":"","city":{"id":"BR-SP-44","name":"São Paulo"},"state":{"id":"BR-SP","name":"São Paulo"},"country":{"id":"BR","name":"Brasil"},"latitude":"","longitude":"","search_location":{"neighborhood":{"id":"","name":""},"city":{"id":"","name":""},"state":{"id":"TUxCUFNBT085N2E4","name":"São Paulo"}}},"seller_contact":null,"location":{},"geolocation":{"latitude":"","longitude":""},"coverage_areas":[],"attributes":[],"listing_source":"","variations":[],"status":"active","sub_status":[],"tags":["dragged_bids_and_visits"],"warranty":"3 meses de garantia","catalog_product_id":null,"parent_item_id":"MLB536038496","differential_pricing":null,"automatic_relist":false,"date_created":"2014-03-24T13:21:30.000Z","last_updated":"2014-05-20T19:19:39.000Z"}));
			response.end();
		} else {
            response.writeHead(404, {
              	'Content-Type' : 'application/json; charset=utf-8'
            });
            response.write(JSON.stringify({"message":"not found"}));
            response.end();
        }     
	},
	executeSearch : function(request, response) {


		var fs = require('fs');
		response.writeHead(200, {
			'Content-Type' : 'application/json; charset=utf-8'
		});

		fs.readFile('jsons/item_search', 'utf8', function (err, data) {
		  	if (err) {
		    	console.log('Error: ' + err);
		    	return;
		  	}

	 	 	response.write(data);
			response.end();

		});
	},

	getItems : function(request, response) {

		response.write(JSON.stringify([{"start_time": "2014-04-07T17:06:58.000Z", "category_id": "MLM120256", "base_price": 459, "id": "MLM453410643", "currency_id": "MXN", "status": "active", "initial_quantity": 3 }, {"start_time": "2014-07-01T10:08:24.000Z", "category_id": "MLM1902", "base_price": 149, "id": "MLM453492786", "currency_id": "MXN", "status": "active", "initial_quantity": 2 }, {"start_time": "2014-06-28T18:08:24.000Z", "category_id": "MLM1717", "base_price": 150, "id": "MLM453492787", "currency_id": "MXN", "status": "active", "initial_quantity": 14 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM39127", "base_price": 199, "id": "MLM453089709", "currency_id": "MXN", "status": "active", "initial_quantity": 10 }, {"start_time": "2014-06-28T18:08:24.000Z", "category_id": "MLM107772", "base_price": 21, "id": "MLM453492788", "currency_id": "MXN", "status": "active", "initial_quantity": 15 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM38981", "base_price": 199, "id": "MLM453089728", "currency_id": "MXN", "status": "active", "initial_quantity": 4 }, {"start_time": "2014-06-28T18:08:24.000Z", "category_id": "MLM107772", "base_price": 44, "id": "MLM453492785", "currency_id": "MXN", "status": "active", "initial_quantity": 15 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM4334", "base_price": 419, "id": "MLM453089729", "currency_id": "MXN", "status": "active", "initial_quantity": 3 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM10952", "base_price": 165, "id": "MLM453089727", "currency_id": "MXN", "status": "active", "initial_quantity": 2 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM5895", "base_price": 290, "id": "MLM453089726", "currency_id": "MXN", "status": "active", "initial_quantity": 3 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM1913", "base_price": 62, "id": "MLM453089725", "currency_id": "MXN", "status": "active", "initial_quantity": 8 }, {"start_time": "2014-06-24T16:15:57.000Z", "category_id": "MLM10367", "base_price": 208, "id": "MLM453089722", "currency_id": "MXN", "status": "active", "initial_quantity": 2 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM39238", "base_price": 113, "id": "MLM453089704", "currency_id": "MXN", "status": "active", "initial_quantity": 6 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM2529", "base_price": 350, "id": "MLM453089721", "currency_id": "MXN", "status": "active", "initial_quantity": 2 }, {"start_time": "2014-06-26T07:12:51.000Z", "category_id": "MLM39152", "base_price": 136, "id": "MLM453265076", "currency_id": "MXN", "status": "active", "initial_quantity": 24 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM38981", "base_price": 40, "id": "MLM453089703", "currency_id": "MXN", "status": "active", "initial_quantity": 10 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM18173", "base_price": 224, "id": "MLM453089720", "currency_id": "MXN", "status": "active", "initial_quantity": 21 }, {"start_time": "2014-06-25T13:35:36.000Z", "category_id": "MLM73770", "base_price": 35, "id": "MLM453179543", "currency_id": "MXN", "status": "active", "initial_quantity": 17 }, {"start_time": "2014-06-27T19:00:18.000Z", "category_id": "MLM1358", "base_price": 40, "id": "MLM453419930", "currency_id": "MXN", "status": "active", "initial_quantity": 10 }, {"start_time": "2014-06-28T18:08:24.000Z", "category_id": "MLM123505", "base_price": 220, "id": "MLM453492791", "currency_id": "MXN", "status": "active", "initial_quantity": 10 }, {"start_time": "2014-06-28T18:08:24.000Z", "category_id": "MLM58470", "base_price": 95, "id": "MLM453492773", "currency_id": "MXN", "status": "active", "initial_quantity": 8 }, {"start_time": "2014-06-28T18:08:24.000Z", "category_id": "MLM38957", "base_price": 50, "id": "MLM453492790", "currency_id": "MXN", "status": "active", "initial_quantity": 13 }, {"start_time": "2014-06-28T18:08:24.000Z", "category_id": "MLM1643", "base_price": 220, "id": "MLM453492778", "currency_id": "MXN", "status": "active", "initial_quantity": 2 }, {"start_time": "2014-06-28T18:08:26.000Z", "category_id": "MLM1899", "base_price": 220, "id": "MLM453492795", "currency_id": "MXN", "status": "active", "initial_quantity": 2 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM1590", "base_price": 53, "id": "MLM453089717", "currency_id": "MXN", "status": "active", "initial_quantity": 9 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM38208", "base_price": 19, "id": "MLM453089718", "currency_id": "MXN", "status": "active", "initial_quantity": 34 }, {"start_time": "2014-06-27T20:23:31.000Z", "category_id": "MLM1358", "base_price": 50, "id": "MLM453425488", "currency_id": "MXN", "status": "active", "initial_quantity": 10 }, {"start_time": "2014-06-24T16:15:52.000Z", "category_id": "MLM72540", "base_price": 60, "id": "MLM453089719", "currency_id": "MXN", "status": "active", "initial_quantity": 9 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM4915", "base_price": 150, "id": "MLM453089714", "currency_id": "MXN", "status": "active", "initial_quantity": 4 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM18118", "base_price": 110, "id": "MLM453089662", "currency_id": "MXN", "status": "active", "initial_quantity": 6 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM38279", "base_price": 199, "id": "MLM453089713", "currency_id": "MXN", "status": "active", "initial_quantity": 2 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM1009", "base_price": 51, "id": "MLM453089716", "currency_id": "MXN", "status": "active", "initial_quantity": 9 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM1009", "base_price": 60, "id": "MLM453089664", "currency_id": "MXN", "status": "active", "initial_quantity": 14 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM18052", "base_price": 199, "id": "MLM453089715", "currency_id": "MXN", "status": "active", "initial_quantity": 4 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM120308", "base_price": 90, "id": "MLM453089663", "currency_id": "MXN", "status": "active", "initial_quantity": 6 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM80468", "base_price": 319, "id": "MLM453089710", "currency_id": "MXN", "status": "active", "initial_quantity": 10 }, {"start_time": "2014-06-24T16:15:53.000Z", "category_id": "MLM120277", "base_price": 149, "id": "MLM453089712", "currency_id": "MXN", "status": "active", "initial_quantity": 3 }, {"start_time": "2014-06-24T16:15:52.000Z", "category_id": "MLM3584", "base_price": 120, "id": "MLM453089711", "currency_id": "MXN", "status": "active", "initial_quantity": 4 }, {"start_time": "2014-06-28T18:08:24.000Z", "category_id": "MLM7637", "base_price": 67, "id": "MLM453492779", "currency_id": "MXN", "status": "active", "initial_quantity": 8 } ]));
		response.end();
	}

};


exports.executeSearch = itemSearchController.executeSearch;
exports.getItem = itemSearchController.getItem;
exports.getItems = itemSearchController.getItems;
exports.ping = itemSearchController.ping;

function sleep(milliseconds){
  		var start = new Date().getTime();
  		for (var i = 0; i < 1e7; i++) {
    	if ((new Date().getTime() - start) > milliseconds){
      		break;
    		}
  		}
	};

// Mappings
urlMapping.add ([{
		pattern: '^/crm/users_full/jalive',
		action: {
			'GET':itemSearchController.ping
		}
	},{
		pattern: '^/crm/items/search*',
		action: {
			'GET':itemSearchController.executeSearch
		}
	},{
		pattern: '^/items/ping',
		action: {
			'GET':itemSearchController.ping
		}
	},
	{
		pattern: '^/items/(\\w+)',
		action: {
			'GET':itemSearchController.getItem
		}
	}, 
	{
		pattern: '^/items\?',
		action: {
			'GET':itemSearchController.getItems
		}
	}

]);
