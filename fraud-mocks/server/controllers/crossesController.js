var url = require('url');
var querystring = require('querystring');
var resourceManager = require("../services/resourceManager");
var jsonHandler = require("../services/jsonHandler");
var urlMapping = require("../urlMapping");

var crossesController = {
	ping : function(request, response) {
		response.writeHead(200, {
			'Content-Type' : 'text/plain; charset=utf-8'
		});
		response.write("pong");
		response.end();        
	},
	getDeviceData : function(request, response) {

		var parts = url.parse(request.url, true);
		var cross_type;
	            var pathname = url.parse(request.url).pathname;
	            var uriRegExp = new RegExp('/fraud/crosses/v2/user/(\\w+)/(\\w+)');
	            uriRegExp.exec(pathname);
	            var userId = RegExp.$1;
		if (parts != null) {
			cross_type = parts.query['cross_type'];
		}

		
		if(userId==123456){
			//para algunos casos, devuelve 404
			response.writeHead(404, {
				'Content-Type' : 'application/json; charset=utf-8'
			});
			response.end();
			return;
		}
		

		response.writeHead(200, {
			'Content-Type' : 'application/json; charset=utf-8'
		});


		


		if (cross_type == "device") {
			response.write(JSON.stringify([{"cust_id":100007345,"status":"guest","points":0,"registration_date":"2011-11-17T00:00:00.000-04:00","restrictions":[],"remedies":[],"verification_history":[],"risk":250,"risk_description":"LOW POINTS: 150.0 - RESTRICTIONS: 0.0 - RISK_RATING ({neutral(100)=1}): 100.0 - INHAB: 0.0 - NO_DEVICE_ID: 0.0","devices":[{"device_id":"ba67f61c2a1e4df9b84424f11fe59df0","searched_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T18:14:02.090-0400","confidence_smart_id":"100.00","transaction_id":60994292,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}},"found_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-06-03T13:46:18.000-0400","confidence_smart_id":"100.00","transaction_id":409936450,"risk_rating":"neutral","reason_code":"1month_ant_device, ARIELLLLLLL","flow_type":"MI"}]}}}]}]));
			response.end();

		}
		else if (cross_type == "smart") {
			response.write(JSON.stringify([{"cust_id":892575,"status":"active","points":2,"registration_date":"2006-10-18T10:05:51.000-04:00","restrictions":[],"remedies":[],"verification_history":["{creation_date=2008-08-27T00:00:00.000-0400, verification_id=DM}","{creation_date=2008-08-27T00:00:00.000-0400, verification_id=DOK}","{creation_date=2006-10-20T00:00:00.000-0400, verification_id=DOK}","{creation_date=2006-10-18T00:00:00.000-0400, verification_id=NV}"],"risk":500,"risk_description":"LOW POINTS: 100.0 - RESTRICTIONS: 0.0 - RISK_RATING ({neutral(100)=1}): 100.0 - INHAB: 0.0 - NO_DEVICE_ID: 300.0","devices":[{"smart_id":"2b08233722044686bc97a99259264041","searched_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T18:14:02.090-0400","confidence_smart_id":"100.00","transaction_id":60994292,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}},"found_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-06-04T23:50:09.000-0400","confidence_smart_id":"82.04","transaction_id":422393955,"risk_rating":"neutral","reason_code":"1month_ant_device, NoDeviceID","flow_type":"BI"}]}}}]},{"cust_id":100007345,"status":"guest","points":0,"registration_date":"2011-11-17T00:00:00.000-04:00","restrictions":[],"remedies":[],"verification_history":[],"risk":275,"risk_description":"LOW POINTS: 150.0 - RESTRICTIONS: 0.0 - RISK_RATING ({low(0)=1, neutral(100)=4, medium(200)=3}): 125.0 - INHAB: 0.0 - NO_DEVICE_ID: 0.0","devices":[{"smart_id":"de75a2f8e70946d988824953d132ec41","searched_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T18:14:02.090-0400","confidence_smart_id":"100.00","transaction_id":60994292,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}},"found_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-06-03T13:46:18.000-0400","confidence_smart_id":"100.00","transaction_id":409936450,"risk_rating":"neutral","reason_code":"1month_ant_device, PEPEEEE","flow_type":"MI"}]}}},{"smart_id":"f6c2bc73374c48f199570b6625802a2f","searched_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T18:14:02.090-0400","confidence_smart_id":"100.00","transaction_id":60994292,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}},"found_customer":{"detail":{"quantity":6,"history":[{"site_id":"MLA","date":"2012-05-20T10:51:20.720-0400","confidence_smart_id":"100.00","transaction_id":82852266,"risk_rating":"neutral","reason_code":"1month_ant_device","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T10:47:51.558-0400","confidence_smart_id":"100.00","transaction_id":82864900,"risk_rating":"medium","reason_code":"1month_ant_device, 3IPLogins_inaDay, 5payment_sameDevice_inaDay, Session_Changes_MidSession","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T10:26:25.765-0400","confidence_smart_id":"100.00","transaction_id":82865836,"risk_rating":"low","reason_code":"1month_ant_device, 3IPLogins_inaDay","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T10:22:59.365-0400","confidence_smart_id":"95.50","transaction_id":82862475,"risk_rating":"neutral","reason_code":"1month_ant_device","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T05:25:21.795-0400","confidence_smart_id":"100.00","transaction_id":81353188,"risk_rating":"medium","reason_code":"1month_ant_device, 3Device_SameSmartID_inaWeek, 3DifferentDeviceIDs_SameAccountLogin_inaWeek, 3IPLogins_inaDay, JAJAJAJAJAJA","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T05:18:29.698-0400","confidence_smart_id":"100.00","transaction_id":81353049,"risk_rating":"medium","reason_code":"1month_ant_device, 3Device_SameSmartID_inaWeek, 3DifferentDeviceIDs_SameAccountLogin_inaWeek, 3IPLogins_inaDay, MPRisk_2Account_perDevice_inaWeek","flow_type":"MI"}]}}},{"smart_id":"f2f6d93b6a5045e7a1148edc04227386","searched_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T18:14:02.090-0400","confidence_smart_id":"100.00","transaction_id":60994292,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}},"found_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T20:29:41.138-0400","confidence_smart_id":"98.50","transaction_id":61584214,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}}}]},{"cust_id":71536626,"status":"guest","points":0,"registration_date":"2011-10-09T00:00:00.000-04:00","restrictions":[],"remedies":[],"verification_history":[],"risk":200,"risk_description":"LOW POINTS: 150.0 - RESTRICTIONS: 0.0 - RISK_RATING ({low(0)=1, neutral(100)=1}): 50.0 - INHAB: 0.0 - NO_DEVICE_ID: 0.0","devices":[{"smart_id":"f6c2bc73374c48f199570b6625802a2f","searched_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T18:14:02.090-0400","confidence_smart_id":"100.00","transaction_id":60994292,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}},"found_customer":{"detail":{"quantity":2,"history":[{"site_id":"MLA","date":"2012-05-20T05:46:16.019-0400","confidence_smart_id":"100.00","transaction_id":81343264,"risk_rating":"low","reason_code":"1month_ant_device, 3Device_SameSmartID_inaWeek, 3IPLogins_inaDay","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T05:13:49.810-0400","confidence_smart_id":"98.50","transaction_id":81343818,"risk_rating":"neutral","reason_code":"1month_ant_device, 3Device_SameSmartID_inaWeek","flow_type":"MI"}]}}}]},{"cust_id":36259295,"status":"active","points":29,"registration_date":"2007-09-01T20:27:08.000-04:00","restrictions":[],"remedies":[{"creation_date":"2008-12-04T18:42:07.000-0400","remedy_id":"-ML_REMOVE"}],"verification_history":["{creation_date=2008-01-03T00:00:00.000-0400, verification_id=DM}","{creation_date=2008-01-03T00:00:00.000-0400, verification_id=DOK}","{creation_date=2007-09-02T00:00:00.000-0400, verification_id=DOK}","{creation_date=2007-09-01T00:00:00.000-0400, verification_id=NV}"],"risk":81.81818181818181,"risk_description":"LOW POINTS: 0.0 - RESTRICTIONS: 0.0 - RISK_RATING ({low(0)=2, neutral(100)=9}): 81.81818181818181 - INHAB: 0.0 - NO_DEVICE_ID: 0.0","devices":[{"smart_id":"de75a2f8e70946d988824953d132ec41","searched_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T18:14:02.090-0400","confidence_smart_id":"100.00","transaction_id":60994292,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}},"found_customer":{"detail":{"quantity":2,"history":[{"site_id":"MLA","date":"2012-05-18T12:22:12.000-0400","confidence_smart_id":"100.00","transaction_id":148923852,"risk_rating":"neutral","reason_code":"1month_ant_device, 3DifferentDeviceIDs_SameAccountLogin_inaWeek","flow_type":"BI"},{"site_id":"MLA","date":"2012-05-31T16:32:41.000-0400","confidence_smart_id":"98.50","transaction_id":409664415,"risk_rating":"neutral","reason_code":"1month_ant_device","flow_type":"MI"}]}}},{"smart_id":"f6c2bc73374c48f199570b6625802a2f","searched_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T18:14:02.090-0400","confidence_smart_id":"100.00","transaction_id":60994292,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}},"found_customer":{"detail":{"quantity":9,"history":[{"site_id":"MLA","date":"2012-05-20T15:09:12.827-0400","confidence_smart_id":"100.00","transaction_id":402423758,"risk_rating":"neutral","reason_code":"1month_ant_device","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T14:54:58.891-0400","confidence_smart_id":"95.50","transaction_id":402409819,"risk_rating":"neutral","reason_code":"1month_ant_device","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T14:51:38.352-0400","confidence_smart_id":"100.00","transaction_id":402429273,"risk_rating":"low","reason_code":"1month_ant_device, 3IPLogins_inaDay","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T08:40:57.591-0400","confidence_smart_id":"95.50","transaction_id":82337141,"risk_rating":"neutral","reason_code":"1month_ant_device, 3Device_SameSmartID_inaWeek","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-20T02:48:12.622-0400","confidence_smart_id":"95.50","transaction_id":80541467,"risk_rating":"neutral","reason_code":"1month_ant_device, 3Device_SameSmartID_inaWeek","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-19T23:29:05.853-0400","confidence_smart_id":"99.50","transaction_id":79671712,"risk_rating":"neutral","reason_code":"1month_ant_device","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-19T20:45:26.810-0400","confidence_smart_id":"100.00","transaction_id":78925657,"risk_rating":"neutral","reason_code":"1month_ant_device","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-19T20:45:25.349-0400","confidence_smart_id":"100.00","transaction_id":78925620,"risk_rating":"neutral","reason_code":"1month_ant_device","flow_type":"MI"},{"site_id":"MLA","date":"2012-05-19T20:36:11.280-0400","confidence_smart_id":"100.00","transaction_id":78925677,"risk_rating":"low","reason_code":"1month_ant_device, 3IPLogins_inaDay","flow_type":"MI"}]}}}]}]));
			response.end();
		}
		else {
			response.write(JSON.stringify([{"cust_id":100007345,"status":"guest","points":0,"registration_date":"2011-11-17T00:00:00.000-04:00","restrictions":[],"remedies":[],"verification_history":[],"risk":250,"risk_description":"LOW POINTS: 150.0 - RESTRICTIONS: 0.0 - RISK_RATING ({neutral(100)=1}): 100.0 - INHAB: 0.0 - NO_DEVICE_ID: 0.0","devices":[{"device_id":"ba67f61c2a1e4df9b84424f11fe59df0","searched_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-05-16T18:14:02.090-0400","confidence_smart_id":"100.00","transaction_id":60994292,"risk_rating":"neutral","reason_code":"","flow_type":"MI"}]}},"found_customer":{"detail":{"quantity":1,"history":[{"site_id":"MLA","date":"2012-06-03T13:46:18.000-0400","confidence_smart_id":"100.00","transaction_id":409936450,"risk_rating":"neutral","reason_code":"1month_ant_device, JUAJUAJUA","flow_type":"MI"}]}}}]}]));
			response.end();
		}
	}, 
	getCurrentDeviceData : function(request, response) {
		response.writeHead(200, {
			'Content-Type' : 'application/json; charset=utf-8'
		});

		var parts = url.parse(request.url, true);
		var cross_type;
		response.write("[     {         \"cust_id\": 123,         \"status\": \"active\",         \"points\": 2,         \"risk\": 650,         \"risk_description\": \"LOW POINTS: 100.0 - RESTRICTIONS: 550.0 - RISK_RATING ({low(0)=2}): 0.0 - INHAB: 0.0 - NO_DEVICE_ID: 0.0\",         \"registration_date\": \"2008-09-11T14:23:46.000-04:00\",         \"restrictions\": [             {                 \"creation_date\": \"2012-02-16T22:21:13.000-0400\",                 \"reason_id\": \"CHARGEBACK_COMP\"             }         ],         \"remedies\": [             {                 \"creation_date\": \"2012-06-04T18:08:47.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             },             {                 \"creation_date\": \"2012-06-04T18:08:46.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             }         ],         \"verification_history\": [             {                 \"creation_date\": \"2012-02-16T23:25:18.000-0400\",                 \"verification_id\": \"PREV_INHAB_PERM\"             }         ],         \"detail\": {             \"quantity\": 2,             \"history\": [                 {                     \"site_id\": \"MLM\",                     \"date\": \"1999-08-12T01:00:00.000-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033000,                     \"risk_rating\": \"low\",                     \"reason_code\": \"a reason code\",                     \"flow_type\": \"MI\"                 },                 {                     \"site_id\": \"MLM\",                     \"date\": \"1999-08-12T01:00:00.000-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033000,                     \"risk_rating\": \"low\",                     \"reason_code\": \"a reason code\",                     \"flow_type\": \"MI\"                 }             ]         }     },     {         \"cust_id\": 61822108,         \"status\": \"active\",         \"points\": 2,         \"risk\": 650,         \"risk_description\": \"LOW POINTS: 100.0 - RESTRICTIONS: 550.0 - RISK_RATING ({low(0)=1}): 0.0 - INHAB: 0.0 - NO_DEVICE_ID: 0.0\",         \"registration_date\": \"2008-09-11T14:23:46.000-04:00\",         \"restrictions\": [             {                 \"creation_date\": \"2012-02-16T22:21:13.000-0400\",                 \"reason_id\": \"CHARGEBACK_COMP\"             }         ],         \"remedies\": [             {                 \"creation_date\": \"2012-06-04T18:08:47.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             },             {                 \"creation_date\": \"2012-06-04T18:08:46.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             }         ],         \"verification_history\": [             {                 \"creation_date\": \"2012-02-16T23:25:18.000-0400\",                 \"verification_id\": \"PREV_INHAB_PERM\"             }         ],         \"detail\": {             \"quantity\": 1,             \"history\": [                 {                     \"site_id\": \"MLM\",                     \"date\": \"1999-08-12T01:00:00.000-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033000,                     \"risk_rating\": \"low\",                     \"reason_code\": \"a reason code\",                     \"flow_type\": \"MI\"                 }             ]         }     },     {         \"cust_id\": 111,         \"status\": \"active\",         \"points\": 2,         \"risk\": 100,         \"risk_description\": \"LOW POINTS: 100.0 - RESTRICTIONS: 0.0 - RISK_RATING ({low(0)=1}): 0.0 - INHAB: 0.0 - NO_DEVICE_ID: 0.0\",         \"registration_date\": \"2008-09-11T14:23:46.000-04:00\",         \"restrictions\": [],         \"remedies\": [             {                 \"creation_date\": \"2012-06-04T18:08:47.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             },             {                 \"creation_date\": \"2012-06-04T18:08:46.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             }         ],         \"verification_history\": [             {                 \"creation_date\": \"2012-02-16T23:25:18.000-0400\",                 \"verification_id\": \"PREV_INHAB_PERM\"             }         ],         \"detail\": {             \"quantity\": 1,             \"history\": [                 {                     \"site_id\": \"MLM\",                     \"date\": \"1999-08-12T01:00:00.000-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033000,                     \"risk_rating\": \"low\",                     \"reason_code\": \"a reason code\",                     \"flow_type\": \"MI\"                 }             ]         }     } ]"
);
		response.end();
	}, 
	getCurrentSmartData : function(request, response) {
		response.writeHead(200, {
			'Content-Type' : 'application/json; charset=utf-8'
		});

		var parts = url.parse(request.url, true);
		var cross_type;
		response.write("[     {         \"cust_id\": 61822110,         \"status\": \"deactive\",         \"points\": 15,         \"risk\": 2650,         \"risk_description\": \"LOW POINTS: 100.0 - RESTRICTIONS: 550.0 - RISK_RATING ({high(1000.0)=1}): 1000.0 - INHAB++: 1000.0 - NO_DEVICE_ID: 0.0\",         \"registration_date\": \"2008-10-11T14:23:46.000-04:00\",         \"restrictions\": [             {                 \"creation_date\": \"2012-02-16T22:21:13.000-0400\",                 \"reason_id\": \"MONEY_THROUGH\"             }         ],         \"remedies\": [             {                 \"creation_date\": \"2012-06-04T18:08:47.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             },             {                 \"creation_date\": \"2012-06-04T18:08:46.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             }         ],         \"verification_history\": [             {                 \"creation_date\": \"2012-04-14T14:08:19.939-0300\",                 \"verification_id\": \"COMPCONT\"             }         ],         \"detail\": {             \"quantity\": 1,             \"history\": [                 {                     \"site_id\": \"MLM\",                     \"date\": \"1999-08-12T01:00:01.000-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033003,                     \"risk_rating\": \"high\",                     \"reason_code\": \"reasonCode2\",                     \"flow_type\": \"MI\"                 }             ]         }     },     {         \"cust_id\": 61822112,         \"status\": \"deactive\",         \"points\": 0,         \"risk\": 2400,         \"risk_description\": \"LOW POINTS: 150.0 - RESTRICTIONS: 550.0 - RISK_RATING ({high(1000.0)=2}): 1000.0 - INHAB: 550.0 - NO_DEVICE_ID: 150.0\",         \"registration_date\": \"2008-10-11T14:23:46.000-04:00\",         \"restrictions\": [             {                 \"creation_date\": \"2012-02-16T22:21:13.000-0400\",                 \"reason_id\": \"TROLOLO\"             }         ],         \"remedies\": [             {                 \"creation_date\": \"2012-06-04T18:08:47.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             },             {                 \"creation_date\": \"2012-06-04T18:08:46.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             }         ],         \"verification_history\": [             {                 \"creation_date\": \"2012-04-14T15:18:19.939-0300\",                 \"verification_id\": \"COMPCONT\"             }         ],         \"detail\": {             \"quantity\": 2,             \"history\": [                 {                     \"site_id\": \"MLM\",                     \"date\": \"2012-06-13T15:08:20.048-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033005,                     \"risk_rating\": \"high\",                     \"reason_code\": \"reasonCode2\",                     \"flow_type\": \"MI\"                 },                 {                     \"site_id\": \"MLM\",                     \"date\": \"2012-06-13T15:08:20.048-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033006,                     \"risk_rating\": \"high\",                     \"reason_code\": \"nodeviceid\",                     \"flow_type\": \"MI\"                 }             ]         }     },     {         \"cust_id\": 61822111,         \"status\": \"deactive\",         \"points\": 15,         \"risk\": 2200,         \"risk_description\": \"LOW POINTS: 100.0 - RESTRICTIONS: 550.0 - RISK_RATING ({high(1000.0)=1}): 1000.0 - INHAB: 550.0 - NO_DEVICE_ID: 0.0\",         \"registration_date\": \"2008-10-11T14:23:46.000-04:00\",         \"restrictions\": [             {                 \"creation_date\": \"2012-02-16T22:21:13.000-0400\",                 \"reason_id\": \"TRALALALA\"             }         ],         \"remedies\": [             {                 \"creation_date\": \"2012-06-04T18:08:47.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             },             {                 \"creation_date\": \"2012-06-04T18:08:46.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             }         ],         \"verification_history\": [             {                 \"creation_date\": \"2012-04-14T14:08:19.939-0300\",                 \"verification_id\": \"MP_CHARGEBACK\"             }         ],         \"detail\": {             \"quantity\": 1,             \"history\": [                 {                     \"site_id\": \"MLM\",                     \"date\": \"1999-08-12T01:00:00.000-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033004,                     \"risk_rating\": \"high\",                     \"reason_code\": \"reasonCode2\",                     \"flow_type\": \"MI\"                 }             ]         }     },     {         \"cust_id\": 61822109,         \"status\": \"deactive\",         \"points\": 15,         \"risk\": 1800,         \"risk_description\": \"LOW POINTS: 100.0 - RESTRICTIONS: 550.0 - RISK_RATING ({neutral(100.0)=1, medium(200.0)=1}): 150.0 - INHAB++: 1000.0 - NO_DEVICE_ID: 0.0\",         \"registration_date\": \"2008-09-11T14:23:48.000-04:00\",         \"restrictions\": [             {                 \"creation_date\": \"2012-02-16T22:21:13.000-0400\",                 \"reason_id\": \"CU_RET_DUD_H\"             }         ],         \"remedies\": [             {                 \"creation_date\": \"2012-06-04T18:08:47.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             },             {                 \"creation_date\": \"2012-06-04T18:08:46.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             }         ],         \"verification_history\": [             {                 \"creation_date\": \"2012-04-14T15:18:19.939-0300\",                 \"verification_id\": \"FRDDOCC\"             }         ],         \"detail\": {             \"quantity\": 2,             \"history\": [                 {                     \"site_id\": \"MLM\",                     \"date\": \"1999-08-12T01:00:01.000-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033002,                     \"risk_rating\": \"neutral\",                     \"reason_code\": \"reasonCode\",                     \"flow_type\": \"PU\"                 },                 {                     \"site_id\": \"MLM\",                     \"date\": \"1999-08-12T01:00:00.000-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033001,                     \"risk_rating\": \"medium\",                     \"reason_code\": \"reasonCode\",                     \"flow_type\": \"BI\"                 }             ]         }     },     {         \"cust_id\": 61822108,         \"status\": \"active\",         \"points\": 0,         \"risk\": 700,         \"risk_description\": \"LOW POINTS: 150.0 - RESTRICTIONS: 550.0 - RISK_RATING ({low(0.0)=1}): 0.0 - INHAB: 0.0 - NO_DEVICE_ID: 0.0\",         \"registration_date\": \"2008-09-11T14:23:46.000-04:00\",         \"restrictions\": [             {                 \"creation_date\": \"2012-02-16T22:21:13.000-0400\",                 \"reason_id\": \"CRUC_FRAUDE_TC\"             }         ],         \"remedies\": [             {                 \"creation_date\": \"2012-06-04T18:08:47.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             },             {                 \"creation_date\": \"2012-06-04T18:08:46.000-0400\",                 \"remedy_id\": \"-ML_REMOVE\"             }         ],         \"verification_history\": [             {                 \"creation_date\": \"2012-04-14T15:18:19.939-0300\",                 \"verification_id\": \"DUP_PERM\"             }         ],         \"detail\": {             \"quantity\": 1,             \"history\": [                 {                     \"site_id\": \"MLM\",                     \"date\": \"1999-08-12T01:00:00.000-0300\",                     \"confidence_smart_id\": \"100.00\",                     \"transaction_id\": 15605033000,                     \"risk_rating\": \"low\",                     \"reason_code\": \"reasonCode\",                     \"flow_type\": \"MI\"                 }             ]         }     } ]"
);
		response.end();
	}

}
;




exports.getDeviceData = crossesController.getDeviceData;

// Mappings
urlMapping.add ([{
		pattern: '^/fraud/crosses/v2/ping',
		action: {
			'GET':crossesController.ping
		}
	},{
		pattern: '^/fraud/crosses/v2/user/(\\w+)/(\\w+)/?$',
		action: {
			'GET':crossesController.getDeviceData
		}
	}, 
	{
		pattern: '^/fraud/crosses/v2/device/(\\w+)/(\\w+)/?$',
		action: {
			'GET':crossesController.getCurrentDeviceData
		}

	}, 
	{
		pattern: '^/fraud/crosses/v2/smart/(\\w+)/(\\w+)/?$',
		action: {
			'GET':crossesController.getCurrentSmartData
		}

	}

]);
